<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RECEPCIÓN</title>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->

    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css"> -->

</head>

<body>

    <div id="app">

        <div v-if="pantalla_actual=='login'">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-6 offset-3">

                        <h2 class="text-center mt-5 mb-4">Login</h2>

                        <div v-if="mensaje_error" class="alert alert-danger" role="alert">
                            {{mensaje_error}}
                        </div>

                        <div class="mb-3">
                            <label for="exampleInputEmail1" class="form-label">Usuario</label>
                            <input v-model="usuario" type="email" class="form-control" id="exampleInputEmail1"
                                aria-describedby="emailHelp" placeholder="Introduce usuario de Mercadona"
                                :autofocus="'autofocus'" :required="'required'">
                        </div>
                        <div class="mb-3">
                            <label for="exampleInputPassword1" class="form-label">Contraseña</label>
                            <input v-model="password" type="password" class="form-control" id="exampleInputPassword1"
                                placeholder="Introduce contraseña" required>
                        </div>

                        <div class="d-grid">
                            <button @click.prevent="valida_usuario()" type="submit" class="btn btn-primary mt-3">Iniciar
                                sesión</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div v-if="pantalla_actual=='elige_almacen'">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-6 offset-3">
                        <h2 class="text-center mt-5 mb-4">Elige Almacén</h2>
                        <div v-if="mensaje_error" class="alert alert-danger" role="alert">
                            {{mensaje_error}}
                        </div>

                        <div class="mb-3">
                            <div class="list-group">
                                <button v-for="almacen in listado_almacenes" @click="setCurrentAlmacen(almacen)"
                                    type="button" class="list-group-item list-group-item-action">
                                    {{almacen.codigo}} - {{almacen.nombre}}
                                </button>
                            </div>
                        </div>

                        <h2 class="text-center mt-5 mb-4">
                            <button type="button" class="btn btn-outline-warning" @click="pantalla_actual='login'">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor"
                                    class="bi bi-arrow-left-square" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd"
                                        d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm11.5 5.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z">
                                    </path>
                                </svg>
                                Volver
                            </button>
                        </h2>
                    </div>
                </div>
            </div>
        </div>

        <div v-if="pantalla_actual=='descargas_activas'">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <div class="container-fluid">
                    <button class="navbar-brand btn" href="#" @click="pantalla_actual='elige_almacen'">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor"
                            class="bi bi-arrow-left-square" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm11.5 5.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z">
                            </path>
                        </svg>
                    </button>
                    DESCARGAS ACTIVAS
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarColor01">
                        <ul class="navbar-nav me-auto">

                        </ul>
                        <form class="d-flex">
                            <div class="form-check form-switch nav-link">
                                <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked" checked>
                                <label class="form-check-label" for="flexSwitchCheckChecked">Modo manual</label>
                            </div>
                            <a href="#" class="nav-link">{{almacen.nombre}}</a>
                            <a href="#" class="nav-link">{{usuario}}</a>
                        </form>
                    </div>
                </div>
            </nav>

            <div class="container-fluid">
                <div class="row">
                    <div class="col-12">

                        <div v-if="mensaje_error" class="alert alert-danger" role="alert">
                            {{mensaje_error}}
                        </div>

                        <div class="mb-3">

                            <div class="row">
                                <div class="col col-md-2">
                                    <div class="sticky-top">
                                        <h4 class="mt-2">Buscador de descargas</h4>
                                        <div class="form-group">
                                            <label for="exampleSelect1" class="form-label">Muelle</label>
                                            <select class="form-select" id="listaMuelles" v-model="muelleSelected"
                                                @change="filtrarDatos()">
                                                <option value="">Todos</option>
                                                <option v-for="option in listaMuelles" v-bind:value="option">
                                                    {{ option }}
                                                </option>
                                            </select>
                                            <label for="exampleSelect1" class="form-label mt-4">Descarga</label>
                                            <select class="form-select" id="exampleSelect1">
                                                <option value="">Todos</option>
                                                <!-- <option>11</option>
                                            <option>12</option>
                                            <option>13</option>
                                            <option>14</option>
                                            <option>25</option> -->
                                            </select>
                                            <label for="exampleSelect1" class="form-label mt-4">Matricula</label>
                                            <select class="form-select" id="exampleSelect1">
                                                <option value="">Todos</option>
                                                <!-- <option>11</option>
                                            <option>12</option>
                                            <option>13</option>
                                            <option>14</option>
                                            <option>25</option> -->
                                            </select>
                                            <label for="exampleSelect1" class="form-label mt-4">Pedido</label>
                                            <select class="form-select" id="exampleSelect1">
                                                <option value="" selected>Todos</option>
                                                <!-- <option>111212</option>
                                            <option>12656565</option>
                                            <option>132333</option>
                                            <option>14345</option>
                                            <option>25555543</option> -->
                                            </select>
                                            </select>
                                            <label for="exampleSelect1" class="form-label mt-4">Producto</label>
                                            <select @change="searchByField()" class="form-select" id="exampleSelect1"
                                                v-model="productoSelected">
                                                <option value="" selected>Todos</option>
                                                <option value="00001-0">00001-0</option>

                                                <!-- <option>111212</option>
                                        <option>12656565</option>
                                        <option>132333</option>
                                        <option>14345</option>
                                        <option>25555543</option> -->
                                            </select>
                                            <br>
                                            <button class="btn btn-success" @click="filtrarDatos()">Buscar</button>
                                            <button class="btn btn-danger" @click="quitarFiltro()"><svg
                                                    xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                    fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                    <path
                                                        d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
                                                    <path fill-rule="evenodd"
                                                        d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
                                                </svg>quitar filtro</button>
                                        </div>

                                    </div>

                                </div>
                                <div class="col col-md-10 bg-dark">

                                    <div v-if="descargasActivas.length==0">
                                        <div class="row">
                                            <div class="col-8 offset-2">
                                                <h2>Para empezar a recepcionar paleta, busca la descarga o haz lectura
                                                    de código</h2>

                                                <div class="form-group">
                                                    <label class="form-label mt-4">Código EAN128 o EAN13</label>
                                                    <div class="form-group form-group-lg">
                                                        <div class="input-group mb-3">
                                                            <input type="text" class="form-control"
                                                                placeholder="Código de barras"
                                                                aria-label="Recipient's username"
                                                                aria-describedby="button-addon2">
                                                            <button class="btn btn-primary" type="button"
                                                                id="button-addon2"><svg
                                                                    xmlns="http://www.w3.org/2000/svg" width="16"
                                                                    height="16" fill="currentColor"
                                                                    class="bi bi-upc-scan" viewBox="0 0 16 16">
                                                                    <path
                                                                        d="M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5zM3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z" />
                                                                </svg></button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div v-if="descargasActivas.length>0">

                                        <h4 class="mt-2">Resultado de búsqueda</h4>

                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th scope="col">MUELLE</th>
                                                    <th scope="col">PEDIDO</th>
                                                    <th scope="col">MATRICULA</th>
                                                    <th scope="col">DESCARGA</th>
                                                </tr>
                                            </thead>
                                        </table>
                                        <!-- {{getDescargas()}} -->
                                        <div class="accordion" id="accordionExample">

                                            <div v-for="(descarga,index) of getDescargas()" class="accordion-item">
                                                <h2 class="accordion-header" v-bind:id="'heading' + descarga.descarga +'-'+descarga.pedido">
                                                    <button class="accordion-button collapsed" type="button"
                                                        data-bs-toggle="collapse"
                                                        v-bind:data-bs-target="'#collapse' + descarga.descarga +'-'+descarga.pedido" aria-expanded="true"
                                                        v-bind:aria-controls="'collapse' + descarga.descarga +'-'+descarga.pedido">
                                                        <div class="col">{{descarga.muelle}}</div>
                                                        <div class="col">{{descarga.pedido}}</div>
                                                        <div class="col">{{descarga.matricula}}</div>
                                                        <div class="col">{{descarga.descarga}}</div>
                                                    </button>
                                                </h2>
                                                <div v-bind:id="'collapse' + descarga.descarga +'-'+descarga.pedido" class="accordion-collapse collapse"
                                                    aria-labelledby="'heading' + descarga.descarga +'-'+descarga.pedido"
                                                    data-bs-parent="#accordionExample" style="">
                                                    <div class="accordion-body">
                                                        <!-- {{getLineasPedidosDescarga(descarga.descarga)}} -->
                                                        <table class="table">
                                                            <thead>
                                                                <tr>
                                                                    <th scope="col">Producto</th>
                                                                    <th scope="col">Variable</th>
                                                                    <th scope="col">Cantidad Recepcionada</th>
                                                                    <th scope="col">Cantidad Pedida</th>
                                                                    <th scope="col">Formato</th>
                                                                    <th scope="col">Denominación</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr
                                                                    v-for="line of getLineasPedidosDescarga(descarga.descarga) ">
                                                                    <th scope="col">
                                                                        <a title="Crear paleta" type="button"
                                                                            :href=`identifica_paleta.html?id=${line.descarga}-${line.pedido}-${line.articulo}-${line.varlog}-${descarga.muelle}-${descarga.matricula}`
                                                                            class="btn btn-outline-warning"><svg
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                width="32" height="32"
                                                                                fill="currentColor"
                                                                                class="bi bi-box-seam"
                                                                                viewBox="0 0 16 16">
                                                                                <path
                                                                                    d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zm3.564 1.426L5.596 5 8 5.961 14.154 3.5l-2.404-.961zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z" />
                                                                            </svg>
                                                                        </a>
                                                                        {{line.descarga}}-{{line.pedido}}-{{line.articulo}}
                                                                    </th>
                                                                    <th scope="col">{{line.varlog}}</th>
                                                                    <th scope="col">{{line.cantidadRecepcionada}}</th>
                                                                    <th scope="col">{{line.cantidadPedida}}</th>
                                                                    <th scope="col">{{line.formato}}</th>
                                                                    <th scope="col">
                                                                        {{line.denominacion.substring(0,20)}}
                                                                    </th>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div> <!-- accordion -->

                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div v-if="pantalla_actual=='identifica_paleta'">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <div class="container-fluid">
                    <button class="navbar-brand btn" href="#" @click="pantalla_actual='elige_almacen'">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor"
                            class="bi bi-arrow-left-square" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                d="M15 2a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2zM0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm11.5 5.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z">
                            </path>
                        </svg>
                    </button>
                    IDENTIFICA PALETA
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarColor01">
                        <ul class="navbar-nav me-auto">

                        </ul>
                        <form class="d-flex">
                            <div class="form-check form-switch nav-link">
                                <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked" checked>
                                <label class="form-check-label" for="flexSwitchCheckChecked">Modo manual</label>
                            </div>
                            <a href="#" class="nav-link">{{almacen.nombre}}</a>
                            <a href="#" class="nav-link">{{usuario}}</a>
                        </form>
                    </div>
                </div>
            </nav>

            <div class="container-fluid">
                <div class="row">
                    <div class="col-12">

                        <div v-if="mensaje_error" class="alert alert-danger" role="alert">
                            {{mensaje_error}}
                        </div>

                        <div class="mb-3">

                            <div class="row">
                                <div class="col col-md-2">
                                    <div class="sticky-top">
                                        <h4 class="mt-2">Detalle de la paleta</h4>
                                        <h4 class="mt-3">MUELLE</h4>
                                        <h5>12</h5>
                                        <h4 class="mt-3">DESCARGA</h4>
                                        <h5>descarga1</h5>
                                        <h4 class="mt-3">MATRICULA</h4>
                                        <h5>444456k</h5>
                                        <h4 class="mt-3">PROVEEDOR</h4>
                                        <h5>Coca-cola, sl</h5>

                                    </div>

                                </div>
                                <div class="col col-md-10 bg-dark">
                                    <div class="row">
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="exampleInputEmail1" class="form-label mt-4">EAN 13</label>
                                                <input type="email" class="form-control" id="exampleInputEmail1"
                                                    aria-describedby="emailHelp" placeholder="" readonly>

                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group">
                                                <label for="exampleInputEmail1" class="form-label mt-4">PALETA</label>
                                                <input type="email" class="form-control" id="exampleInputEmail1"
                                                    aria-describedby="emailHelp" placeholder="" readonly>

                                            </div>
                                        </div>
                                        <div class="col-1">
                                            <div class="form-group">
                                                <label for="exampleInputEmail1" class="form-label mt-4">CODIGO</label>
                                                <input type="email" class="form-control" id="exampleInputEmail1"
                                                    aria-describedby="emailHelp" placeholder="" readonly>

                                            </div>
                                        </div>
                                        <div class="col-1">
                                            <div class="form-group">
                                                <label for="exampleInputEmail1" class="form-label mt-4">VL</label>
                                                <input type="email" class="form-control" id="exampleInputEmail1"
                                                    aria-describedby="emailHelp" placeholder="" readonly>

                                            </div>
                                        </div>
                                        <div class="col-6">
                                            <div class="form-group">
                                                <label for="exampleInputEmail1"
                                                    class="form-label mt-4">DENOMINACIÓN</label>
                                                <input type="email" class="form-control" id="exampleInputEmail1"
                                                    aria-describedby="emailHelp" placeholder="" readonly>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row m-1 mt-4">
                                        <ul class="nav nav-tabs">
                                            <li class="nav-item">
                                                <a class="nav-link active" data-bs-toggle="tab" href="#palletData">Datos
                                                    Paleta</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" data-bs-toggle="tab" href="#moreInfo">Más
                                                    información</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" data-bs-toggle="tab"
                                                    href="#temperature">Temperatura</a>
                                            </li>

                                        </ul>
                                        <div id="myTabContent" class="tab-content">
                                            <div class="tab-pane fade show active" id="palletData">


                                                <div class="row">
                                                    <div class="col">
                                                        <div class="form-group">
                                                            <label for="exampleInputEmail1"
                                                                class="form-label mt-4">LOTE</label>
                                                            <input type="email" class="form-control"
                                                                id="exampleInputEmail1" aria-describedby="emailHelp"
                                                                placeholder="" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="col">
                                                        <div class="form-group">
                                                            <label for="exampleInputEmail1"
                                                                class="form-label mt-4">PEDIDO</label>
                                                            <input type="email" class="form-control"
                                                                id="exampleInputEmail1" aria-describedby="emailHelp"
                                                                placeholder="" readonly>
                                                        </div>
                                                    </div>
                                                    <div class="col">
                                                        <div class="form-group">
                                                            <label for="exampleInputEmail1"
                                                                class="form-label mt-4">FECHA DE CADUCIDAD</label>
                                                            <input type="date" class="form-control"
                                                                id="exampleInputEmail1" aria-describedby="emailHelp"
                                                                placeholder="" readonly>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row mt-4">
                                                    <div class="col">
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-group">
                                                                    <label for="exampleInputEmail1"
                                                                        class="form-label mt-4">FORMATO</label>
                                                                    <input type="email" class="form-control"
                                                                        id="exampleInputEmail1"
                                                                        aria-describedby="emailHelp" placeholder=""
                                                                        readonly>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <div class="form-group">
                                                                    <label for="exampleInputEmail1"
                                                                        class="form-label mt-4">CAJAS/PALETA</label>
                                                                    <input type="email" class="form-control"
                                                                        id="exampleInputEmail1"
                                                                        aria-describedby="emailHelp" placeholder=""
                                                                        readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-group">
                                                                    <label for="exampleInputEmail1"
                                                                        class="form-label mt-4">UNIDADES/CAJA</label>
                                                                    <input type="email" class="form-control"
                                                                        id="exampleInputEmail1"
                                                                        aria-describedby="emailHelp" placeholder=""
                                                                        readonly>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <div class="form-group">
                                                                    <label for="exampleInputEmail1"
                                                                        class="form-label mt-4">UNIDADES/RETRACTIL</label>
                                                                    <input type="email" class="form-control"
                                                                        id="exampleInputEmail1"
                                                                        aria-describedby="emailHelp" placeholder=""
                                                                        readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col">
                                                                <hr>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-group">
                                                                    <label for="exampleInputEmail1"
                                                                        class="form-label mt-4">TIPO PALETA</label>
                                                                    <input type="email" class="form-control"
                                                                        id="exampleInputEmail1"
                                                                        aria-describedby="emailHelp" placeholder=""
                                                                        readonly>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <div class="form-group">
                                                                    <label for="exampleInputEmail1"
                                                                        class="form-label mt-4">TIPO CAJA</label>
                                                                    <input type="email" class="form-control"
                                                                        id="exampleInputEmail1"
                                                                        aria-describedby="emailHelp" placeholder=""
                                                                        readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col bg-secondary border border-primary rounded">
                                                        <div class="row">
                                                            <div class="col">
                                                                <div class="form-group">
                                                                    <label for="exampleInputEmail1"
                                                                        class="form-label mt-4">CANTIDAD</label>
                                                                    <input type="email" class="form-control"
                                                                        id="exampleInputEmail1"
                                                                        aria-describedby="emailHelp" placeholder=""
                                                                        readonly>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <div class="form-group">
                                                                    <label for="exampleSelect1"
                                                                        class="form-label mt-4">FORMATO VENTA</label>
                                                                    <select class="form-select" id="exampleSelect1">
                                                                        <option value="U">UNIDADES</option>
                                                                        <option value="C" selected>CAJA</option>
                                                                        <option value="P">PESO</option>
                                                                        <option value="R">RETRACTIL</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="row">

                                                            <div class="col">
                                                                <div class="row">
                                                                    <div class="form-group">
                                                                        <label for="exampleInputEmail1"
                                                                            class="form-label mt-4">PESO BRUTO</label>
                                                                        <div class="row">
                                                                            <div class="col-1">
                                                                                <div class="form-check ">
                                                                                    <input
                                                                                        class="form-check-input align-bottom"
                                                                                        type="radio"
                                                                                        name="flexRadioDefault"
                                                                                        id="flexRadioDefault2">
                                                                                </div>
                                                                            </div>
                                                                            <div class="col">
                                                                                <input type="email" class="form-control"
                                                                                    id="exampleInputEmail1"
                                                                                    aria-describedby="emailHelp"
                                                                                    placeholder="" readonly>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col">
                                                                <div class="row">

                                                                    <div class="form-group">
                                                                        <label for="exampleInputEmail1"
                                                                            class="form-label mt-4">PESO NETO</label>
                                                                        <div class="row">
                                                                            <div class="col-1">
                                                                                <div class="form-check ">
                                                                                    <input
                                                                                        class="form-check-input align-bottom"
                                                                                        type="radio"
                                                                                        name="flexRadioDefault"
                                                                                        id="flexRadioDefault2" checked>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col">
                                                                                <input type="email" class="form-control"
                                                                                    id="exampleInputEmail1"
                                                                                    aria-describedby="emailHelp"
                                                                                    placeholder="" readonly>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>


                                                    </div>
                                                </div>

                                                <div class="row mt-4 mb-4">
                                                    <div class="col-4">
                                                        <div class="btn btn-danger">borrar datos</div>
                                                    </div>
                                                    <div class="col-8 text-end">
                                                        <div class="btn btn-secondary">re-imprimir etiqueta</div>
                                                        <div class="btn btn-primary">confirmar</div>
                                                    </div>

                                                </div>




                                            </div>
                                            <div class="tab-pane fade" id="moreInfo">
                                                <p>Food truck fixie locavore, accusamus mcsweeney's marfa nulla
                                                    single-origin coffee squid. Exercitation +1 labore velit, blog
                                                    sartorial PBR leggings next level wes anderson artisan four loko
                                                    farm-to-table craft beer twee. Qui photo booth letterpress, commodo
                                                    enim craft beer mlkshk aliquip jean shorts ullamco ad vinyl cillum
                                                    PBR. Homo nostrud organic, assumenda labore aesthetic magna delectus
                                                    mollit.</p>
                                            </div>
                                            <div class="tab-pane fade" id="temperature">
                                                <p>it, blog sartorial PBR leggings next level wes anderson artisan four
                                                    loko farm-to-table craft beer twee. Qui photo booth letterpress,
                                                    commodo enim craft beer mlkshk aliquip jean shorts ullamco ad vinyl
                                                    cillum PBR. Homo nostrud organic, assumenda labore aesthetic magna
                                                    delectus mollit.</p>
                                            </div>
                                        </div>

                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- development version, includes helpful console warnings -->
        <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>


        <script>
            var app = new Vue({
                el: '#app',
                data: {
                    pantalla_actual: 'descargas_activas',
                    mensaje_error: '',
                    usuario: 'juanra',
                    password: '',
                    listado_almacenes: [
                        {
                            nombre: 'Villadangos Frio',
                            codigo: 'A1012'
                        },
                        {
                            nombre: 'Ribarroja Congelado',
                            codigo: 'A1001'
                        },
                    ],
                    almacen: {
                        nombre: 'Villadangos Frio',
                        codigo: 'A1012'
                    },
                    listaMuelles: [1, 2, 3],
                    muelleSelected: null,
                    productoSelected: '',
                    descargasActivasCacheada: [],
                    descargasActivas: [
                        // {
                        //     muelle: 12,
                        //     descarga: 'A0001',
                        //     matricula: 'Matri1',
                        //     pedidos: [
                        //         {
                        //             cod_pedido: 'P0001',
                        //             lineas: [
                        //                 {
                        //                     articulo: '00001',
                        //                     varlog: '0',
                        //                     denominacion: 'articulo 1',
                        //                     formato: 'C01',
                        //                     cantidadPedida: 10,
                        //                     cantidadRecepcionada: 0
                        //                 },
                        //                 {
                        //                     articulo: '00002',
                        //                     varlog: '0',
                        //                     denominacion: 'articulo 2',
                        //                     formato: 'C01',
                        //                     cantidadPedida: 20,
                        //                     cantidadRecepcionada: 0
                        //                 },
                        //             ],
                        //         }
                        //     ],
                        // },
                        // {
                        //     muelle: 13,
                        //     descarga: 'A0002',
                        //     matricula: 'Matri2',
                        //     pedidos: [
                        //         {
                        //             cod_pedido: 'P0002',
                        //             lineas: [
                        //                 {
                        //                     articulo: '00003',
                        //                     varlog: '0',
                        //                     denominacion: 'articulo 3',
                        //                     formato: 'C01',
                        //                     cantidadPedida: 100,
                        //                     cantidadRecepcionada: 0
                        //                 },
                        //                 {
                        //                     articulo: '00004',
                        //                     varlog: '0',
                        //                     denominacion: 'articulo 4',
                        //                     formato: 'C01',
                        //                     cantidadPedida: 200,
                        //                     cantidadRecepcionada: 0
                        //                 },
                        //             ],
                        //         }
                        //     ],
                        // },
                    ],
                },
                mounted() {
                    this.loadDescargasActivas()

                },
                methods: {
                    valida_usuario() {
                        if (this.usuario === this.password) {
                            this.mensaje_error = ""
                            this.pantalla_actual = 'elige_almacen'
                        } else {
                            this.mensaje_error = "Usuario Incorrecto"
                        }
                    },
                    setCurrentAlmacen(almacen) {
                        this.almacen = almacen
                        this.pantalla_actual = "descargas_activas"
                        this.loadDescargasActivas()
                    },

                    getDistinctCombosValues() {

                        let muelles = []


                        for (const descarga of this.descargasActivasCacheada) {
                            muelles.push(descarga.muelle)

                        }

                        // console.log("muelles", muelles)

                        this.listaMuelles = [...new Set(muelles)]
                        this.muelleSelected = null

                    },

                    quitarFiltro() {
                        this.muelleSelected = null
                        // this.filtrarDatos()
                        this.descargasActivas = []
                    },

                    filtrarDatos() {
                        this.descargasActivas = this.descargasActivasCacheada.slice()

                        if (this.muelleSelected == null || this.muelleSelected == "") {
                            return
                        }

                        this.descargasActivas = this.descargasActivas.filter((x) => x.muelle === this.muelleSelected)



                    },
                    getDescargas() {
                        const result = []

                        for (const order of this.descargasActivas) {
                            const orderObj = {}
                            orderObj.muelle = order.muelle
                            orderObj.descarga = order.descarga
                            orderObj.matricula = order.matricula
                            for (const pedido of order.pedidos) {
                                orderObj.pedido = pedido.cod_pedido
                                result.push(orderObj)
                            }
                        }

                        return result
                    },
                    getLineasPedidosDescarga(cod_descarga) {
                        const result = []

                        const descarga = this.descargasActivas.filter((x) => x.descarga === cod_descarga)

                        if (descarga.length === 0) return result

                        for (const order of descarga[0].pedidos) {
                            for (const line of order.lineas) {
                                line.pedido = order.cod_pedido
                                line.descarga = cod_descarga
                                result.push(line)
                            }
                        }

                        return result
                    },
                    loadDescargasActivas() {
                        fetch('descargasActivas.json')
                            .then(response => response.json())
                            .then(data => {
                                console.log("recibo", data)
                                this.descargasActivasCacheada = data
                                // this.descargasActivas = data.slice()
                                this.getDistinctCombosValues()
                            });

                    },
                    searchByField() {
                        // console.log(this.productoSelected)
                        // console.log("cacheadas", this.descargasActivasCacheada)
                        let descargasCandidatas = []
                        for (let descarga of this.descargasActivasCacheada) {
                            // console.log("descarga", descarga)
                            for (let pedido of descarga.pedidos) {
                                for (let linea of pedido.lineas) {
                                    // console.log("lin", linea9)
                                    if (linea.articulo + "-" + linea.varlog == this.productoSelected) {
                                        descargasCandidatas.push(descarga.descarga)
                                    } else {
                                        // console.log("no-lin", linea)                                        
                                    }
                                }
                            }
                        }
                        console.log("descargas_candidatas", descargasCandidatas)

                        this.descargasActivas = this.descargasActivasCacheada.slice()

                        this.descargasActivas = this.descargasActivas.filter((x) => descargasCandidatas.includes(x.descarga))

                    }
                }
            })
        </script>
</body>

</html>